<?xml version="1.0" encoding="utf-8"?>
<model  xmlns="http://money2013.net/datagenerator/2013/07/27">
    <version>11</version>
    <object name="Pay" table="pays">
        <version>11</version>
        <field name="Guid" column="r_guid" type="String" />
        <field name="Modified" column="modified" type="boolean" />
        <field name="Deleted" column="deleted" type="boolean" />
        <field name="Notes" column="notes" type="String" />
        <field name="Value" column="pay_value" type="double" />
        <field name="Created" column="pay_date" type="Date" />
        <field name="CreatedYear" column="pay_year" type="int" />
        <field name="CreatedMonth" column="pay_month" type="int" />
		<field name="CreatedDay" column="pay_day" type="int" />
        <field name="Account" column="account_id" type="long" />
        <field name="Category" column="category_id" type="long" />
        <field name="IsSystem" column="is_system" type="boolean" />
        
        <view name="List" alias="p">
            <column name="Guid" expr="p.r_guid" />
            <column name="Deleted" expr="p.deleted" />
            <column name="Notes" expr="p.notes" />
            <column name="Value" expr="p.pay_value" />
            <column name="Created" expr="p.pay_date" />
            <column name="AccountName" expr="a.name" />
            <column name="AccountGuid" expr="a.r_guid" />
            <column name="Currency" expr="a.currency" />
            <column name="CategoryName" expr="c.name" />
            <column name="CategoryGuid" expr="c.r_guid" />
            <column name="CategoryTheme" expr="IFNULL(c.theme_id,0)" />
            <column name="IsSystem" expr="p.is_system" />
            <join object="Account" alias="a" on="p.account_id=a._id" />
            <join object="Category" alias="c" on="p.category_id=c._id" />
        </view>
    </object>
    <object name="Account" table="accounts">
        <version>11</version>
        <field name="Guid" column="r_guid" type="String" />
        <field name="Modified" column="modified" type="boolean" />
        <field name="Deleted" column="deleted" type="boolean" />
        <field name="Notes" column="notes" type="String" />
        <field name="Name" column="name" type="String" />
        <field name="Currency" column="currency" type="String" />
        <view name="List" alias="a" groupBy="a._id">
        	<column name="Notes" expr="a.notes" />
        	<column name="Name" expr="a.name" />
        	<column name="Currency" expr="a.currency" />
        	<column name="Balance" expr="IFNULL(SUM(p.pay_value),0)" />
        	<join object="Pay" alias="p" on="p.account_id=a._id AND p.deleted=0" />
       	</view>
    </object>
    <object name="Category" table="categories">
        <version>11</version>
        <field name="Guid" column="r_guid" type="String" />
        <field name="Modified" column="modified" type="boolean" />
        <field name="Deleted" column="deleted" type="boolean" />
        <field name="Notes" column="notes" type="String" />
        <field name="Name" column="name" type="String" />
        <field name="IsDefault" column="is_default" type="boolean" />
        <field name="Theme" column="theme_id" type="int" />
    </object>
    <object name="CurrencyCode" table="currency_code">
        <field name="Code" column="code" type="String" />
        <field name="Notes" column="notes" type="String" />
    </object>
    <object name="ApplicationSettings" table="app_settings">
        <field name="Name" column="key_name" type="String" />
        <field name="Value" column="key_value" type="String" />
    </object>
</model>